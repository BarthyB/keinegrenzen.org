{% extends 'AppBundle::base.html.twig' %}
{% block bodyclass %}profile{% endblock %}
{% block stylesheets %}
    {% stylesheets
    'bundles/app/css/profile.css' filter='cssrewrite' %}
    <link rel="stylesheet" href="{{ asset_url }}" xmlns="http://www.w3.org/1999/html"/>
    {% endstylesheets %}
    <link rel="stylesheet" href="/profile/profile_{{ frontPage.UURL|raw }}.css"/>
    {% for album in frontPage.albums %}
        <link rel="stylesheet" href="/album/album_{{ album.UURL|raw }}.css"/>
    {% endfor %}
    {{ parent() }}
{% endblock %}

{% block og_image %}
    <meta name="og:image" content="https://www.keinegrenzen.org{{ asset(frontPage.cover.webPath) }}">
    <meta property="og:image:width" content="1920"/>
    <meta property="og:image:height" content="1080"/>
{% endblock %}

{% block pagetitle %}{{ frontPage.name }} | {{ 'base.meta.title'|trans }}{% endblock %}
{% block description %}{{ frontPage.metaDescription }}{% endblock %}

{% block body %}
    {% include '@App/nav.html.twig' with {'index': false} %}
    <div class="container-fluid fill header">
        <div class="row">
            <div class="col-lg-4 col-lg-offset-0 col-md-4 col-md-offset-0 col-sm-6 col-sm-offset-0 col-xs-10 col-xs-push-1">
                <div class="artist text-center">
                    <div class="img-div"></div>
                </div>
                <div class="page-title-container">
                    {% if frontPage.shortName is not null %}
                        <h1><span class="page-title page-title-normal"><strong>{{ frontPage.name }}</strong></span><span
                                    class="page-title page-title-abbr"><strong>{{ frontPage.shortName }}</strong></span>
                        </h1>
                    {% else %}
                        <h1><span class="page-title"><strong>{{ frontPage.name }}</strong></span></h1>
                    {% endif %}
                    <br>
                    <span class="page-title">{{ frontPage.genre }}, {{ 'from'|trans }} {{ frontPage.location }}</span>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row fill-height">
            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                <h2>{{ 'profile.h2.bio'|trans }} & {{ 'profile.h2.albums'|trans }}</h2>
                <ul class="list-inline">
                    {% for link in frontPage.links %}
                        {% if link.getSocial != 'link' %}
                            <li>{{ link.getMarkup|raw }}</li>
                        {% endif %}
                    {% endfor %}
                    {% for link in frontPage.links %}
                        {% if link.getSocial == 'link' %}
                            <li>{{ link.getMarkup|raw }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
                <div class="vita">
                    {{ frontPage.vita|raw }}
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 citations-container">
                <div class="citations">
                    {{ frontPage.citations|raw }}
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                <div class="row album-art-container">
                    {% set loopReal = 0 %}
                    {% for album in frontPage.albums %}
                        {% if album.public == true %}
                            {% set loopReal = loopReal+1 %}
                            <div class="{{ (loopReal==1)?'col-lg-12 col-md-12':'col-lg-6 col-md-6' }} col-sm-6 col-xs-6"
                                 data-uurl="{{ album.UURL }}">
                                <div class="mask text-center"><span class="fa fa-3x fa-fw fa-search"></span></div>
                                <div class="album-art {{ 'album-art-' ~ album.UURL }}"><span
                                            class="sr-only">{{ album.title }} {{ 'sr-only.album.cover'|trans }}</span>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% set loopReal = 0 %}
            {% for album in frontPage.albums %}
                {% if album.public == true %}
                    {% set loopReal = loopReal+1 %}
                    <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 {{ 'album-' ~ album.UURL }} {{ (loopReal==1)?'active' }} album-details">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="album-description">
                                    <h3>{{ album.title }}</h3>
                                    <p>{{ 'published'|trans }}: {{ album.published|date('d.m.Y') }}</p>
                                    {{ album.description|raw|nl2br }}
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="album-embed" id="album-embed-{{ loop.index0 }}"
                                     data-sc="{{ album.soundcloud|raw }}" data-title="{{ album.title }}">
                                    <div class="album-list">
                                        <ul class="list-group" data-toggled="false"></ul>
                                    </div>
                                    <div class="text-right listen-on-sc">
                                        <a href="{{ album.soundcloud|raw }}" target="_blank"
                                           title="{{ 'listenOnSc'|trans }}"><span
                                                    class="fa fa-2x fa-fw fa-soundcloud"><span
                                                        class="sr-only">{{ 'listenOnSc'|trans }}</span></span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 album-btns">
                                <a class="btn btn-primary" target="_blank"
                                   href="https://www.aerzte-ohne-grenzen.de/spenden-sammeln?cfd=barthyb">{{ 'donate'|trans }}</a>
                                <a class="btn btn-secondary"
                                   href="/uploads/albums/{{ album.albumFilePath }}">{{ 'download'|trans }}</a>
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <div class="row margin-top-50 global-player">
            <div class="col-lg-2 col-lg-offset-1 col-md-2 col-md-offset-1 col-sm-3 col-sm-offset-0 col-xs-8 col-xs-offset-0">
                <span class="fa fa-backward fa-fw fa-2x music-player-interaction"><span
                            class="sr-only">{{ 'backward'|trans }}</span></span>
                <span class="fa fa-play fa-fw fa-2x music-player-interaction"><span
                            class="sr-only">{{ 'play'|trans }}</span></span>
                <span class="fa fa-pause fa-fw fa-2x music-player-interaction"><span
                            class="sr-only">{{ 'pause'|trans }}</span></span>
                <span class="fa fa-forward fa-fw fa-2x music-player-interaction"><span
                            class="sr-only">{{ 'forward'|trans }}</span></span>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-7 hidden-xs">
                <div class="progress">
                    <div class="progress-bar active" role="progressbar"
                         aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0">
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-lg-offset-1 col-md-2 col-md-offset-1 col-sm-2 col-xs-4 col-xs-offset-0">
                <p><span class="now-playing-elapsed"></span>/<span class="now-playing-length"></span></p>
            </div>
            <div class="col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 col-xs-12 col-xs-offset-0">
                <p><span class="now-playing-album"></span> - <span class="now-playing-song"></span></p>
            </div>
        </div>
    </div>
    {% include '@App/footer.html.twig' %}
{% endblock %}

{% block bodyscripts %}
    {{ parent() }}
    <script src="https://w.soundcloud.com/player/api.js"></script>
    {% javascripts
    '@AppBundle/Resources/public/plugins/js-url/url.min.js'
    '@AppBundle/Resources/public/plugins/soundcloud-audio/dist/soundcloud-audio.min.js'
    '@AppBundle/Resources/public/js/profile.js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}